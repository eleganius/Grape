<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.app.dao.UserDao">

	<resultMap id="user" type="com.example.app.domain.User">
		<id property="id" column="id" />
		<result property="avatar" column="avatar" />
		<result property="name" column="name" />
		<result property="birthday" column="birthday" />
		<result property="email" column="email" />
		<result property="loginPass" column="login_pass" />
		<result property="introduction" column="introduction" />
		<result property="createdAt" column="created_at" />
		<result property="updatedAt" column="updated_at" />
		<result property="status" column="status" />
	</resultMap>

	<select id="selectUserByEmail"
		resultType="com.example.app.domain.User">
		SELECT * FROM users
		WHERE email = #{email}
	</select>

	<select id="selectById" parameterType="int"
		resultType="com.example.app.domain.User">
		SELECT * FROM users
		WHERE users.id = #{id}
	</select>

	<insert id="insert" parameterType="com.example.app.domain.User"
		useGeneratedKeys="true">
		INSERT INTO users
		(avatar, name, birthday, email, login_pass, introduction, created_at)
		VALUES
		(#{avatar}, #{name}, #{birthday}, #{email}, #{loginPass}, #{introduction}, NOW())
	</insert>

	<update id="update" parameterType="com.example.app.domain.User">
		UPDATE users
		SET
		avatar = #{avatar},
		name = #{name},
		birthday = #{birthday},
		email = #{email},
		login_pass = #{loginPass},
		introduction = #{introduction},
		updated_at = NOW()
		WHERE id = #{id}
	</update>
	
	<update id="setDeleteById" parameterType="int">
		UPDATE users
		SET
		status = 'DEL'
		WHERE id = #{id}
	</update>

</mapper>